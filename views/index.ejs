<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="./icon2.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link href='https://unpkg.com/css.gg@2.0.0/icons/css/search.css' rel='stylesheet'>
    <link rel="stylesheet" href="styles/index.css">
    <title>Odaplace</title>
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-xxl">
            <a href="/" class="navbar-brand">Odaplace</a>
            <form class="search-form d-flex" role="search">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-primary" type="submit">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path>
                        <path d="M21 21l-6 -6"></path>
                    </svg>
                </button>
            </form>
            <nav>
            <% if (typeof user !== "undefined" && user.id) { %>
                    <div class="user-actions">
                        <% if (typeof user !== "undefined" && user.role === 'admin') { %>
                            <a href="/admin">Admin</a>
                        <% } %>
                    <div class="dropdown">
                        <button class="btn" type="button" data-bs-toggle="dropdown" aria-expanded="false" data-bs-display="static">
                            Menu
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="#" class="dropdown-item">Settings</a></li>
                            <li><a href="/auth/logout" class="dropdown-item">Logout</a></li>
                        </ul>
                    </div>
                    </div>
            <% } else { %>
                <a href="/auth/login">
                    Login
                </a>
            <% } %>
            <a href="/cart">Cart</a>
        </nav>
        </div>
    </nav>

        <div class="container product-wrapper mt-4 d-flex flex-row gap-3">
            <% if (typeof products === "null") { %>
                No Products
            <% } else { %>
                    <% for (let i = 0; i < products.length ; i++) { %>
                        <div class="card p-2" style="width: 18rem; height: 30rem;">
                            <img src="/images/<%= products[i].image %>" class="card-img-top" alt="..." style="height: 20rem;">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <%= products[i].name %>
                                </h5>
                                <h3><%= products[i].price %> â‚´</h6>
                                <a class="stretched-link" style="right: unset;" href="/product/<%= products[i]._id %>/">
                                    
                                </a>
                                <form action="/cart/add" method="post">
                                    <button class="btn btn-primary z-3" style="right: unset;" value="<%= products[i]._id %>" name="productId">
                                        Add to Cart
                                    </button>
                                </form> 
                          </div>
                        </div>
                    <% } %>
                <% }  %>
        </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
</body>
</html>